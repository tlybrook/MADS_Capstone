<!DOCTYPE html>
<html lang="en">
<head>
    <title>CT Scan Prediction</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet" />
            
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
      <div class="container px-4 px-lg-5">
        <a class="navbar-brand" href="#">Capstone Project</a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fas fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
          </ul>
        <!-- GitHub link with logo -->
        <a class="navbar-brand" href="https://github.com/tlybrook/MADS_Capstone" target="_blank">
            <img src="https://github.com/favicon.ico" width="25" height="25" class="d-inline-block align-top" alt="GitHub Logo">
        </a>
        </div>
    </nav>
    <header class="landing-page" id="page-top">
      <div class="container px-4 px-lg-5 d-flex align-items-center justify-content-center">
          <div class="d-flex justify-content-center">
              <div class="text-center">
                <div class="box-test">
                  <h1 id="section-header">Lung CT Scan Prediction</h1>
                  <p>Welcome to our Capstone Project! Here you can upload Lung CT scans and we will output the predicted class.</p>
                  <div class="form1">
                    <form method="post" enctype="multipart/form-data">
                      <div class="form-group">
                          <div class="custom-file">
                              <input type="file" name="file" class="custom-file-input" id="customFile">
                              <label class="custom-file-label" for="customFile">Choose file</label>
                              <script>
                                $(".custom-file-input").on("change", function() {
                                  var fileName = $(this).val().split("\\").pop();
                                  $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
                                });
                              </script>
                          </div>
                      </div>
                      <button type="submit" class="btn btn-primary" action='/app', onClick="myFunction()">Upload</button>
                      <script>
                        function myFunction() {
                          window.location.href="#results"
                        }
                      </script>
                    </form>
                  </div>
                  <br>
                  <p>Warning: This is intended for research purposes, please do not upload personal scans.</p>
                </div>
            </div>
          </div>
      </div>
    </header>
    {% if filename %}
    <section class="about-section text-center" id="results">
      <div class="box2">
      <div class="container px-4 px-lg-5">
        <div class="row gx-4 gx-lg-5 justify-content-center">
            <div class="col-lg-8">
              <h2 id="anchor" class="text-white mb-4" >Results</h2>
              <div id="uploadedFileSection" class="mt-5">
                <div class="mt-5 uploaded-section">
                    <img src="{{filename}}" id="uploadedImage" height=300px>
                </div>
                <br></br>
                <p>File Uploaded: {{ filename }}</p>
                <p>Prediction: {{ prediction }}</p>
                <p>{{ probabilities }}</p>
              </div>
           </div>
        </div>
      </div>
      </div>
    </section>
    {% endif %}
    <br></br>
    <br></br>
    <br></br>
    <br></br>    
    <br></br>
    <section class="about-section text-center" id="about">
        <div class="container px-4 px-lg-5">
            <div class="row gx-4 gx-lg-5 justify-content-center">
                <div class="col-lg-8">
                    <h2 id="anchor" class="text-white mb-4">About us</h2>
                    <p class="text-white-50">
                        We are students at the University of Michigan Master of Applied Data Science Program.
                        Our names are Tricia Lybrook, Matthew Harris, and Aaron Dalal. 
                        If you have questions please feel free to reach out to us on Github!
                        <br></br>
                        Please be careful about uploading personal content. 
                        Do not use the results of this model to make medical decisions. Please consult medical professionals for medical advice.
                        This model is only intented for research benchmarking. 
                    </p>
                </div>
            </div>
        </div>
    </section>
    <br></br>
    <br></br>
    <br></br>
    <br></br>
    <br></br>
</body>
</html>